var Re=Object.defineProperty;var Be=(m,t,e)=>t in m?Re(m,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):m[t]=e;var S=(m,t,e)=>Be(m,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}})();var x=(m=>(m.L="L",m.R="R",m.U="U",m.D="D",m))(x||{});class ge{constructor(t,e){this.key=t,this.value=e}getKey(){return this.key}getValue(){return this.value}static from(t,e){return new ge(t,e)}}const Te=class Te{static makeMove(t,e){const n=t.indexOf(-1),a=this.getXY(n);let c=a.getKey(),i=a.getValue();e===x.L&&(c-=1),e===x.R&&(c+=1),e===x.U&&(i-=1),e===x.D&&(i+=1);const h=this.getIndex(c,i);if(h>15)throw console.log(t),console.log(e),new Error("i1 > 15");const A=[...t],P=A[h];return A[n]=P,A[h]=-1,A}static getXY(t){const e=t%4,s=Math.floor(t/4);return ge.from(e,s)}static getIndex(t,e){return e*4+t}static _getValidMoves(t){const e=this.getXY(t);let s=Object.values(x).slice();return e.getKey()===0&&(s=s.filter(n=>n!==x.L)),e.getKey()===3&&(s=s.filter(n=>n!==x.R)),e.getValue()===0&&(s=s.filter(n=>n!==x.U)),e.getValue()===3&&(s=s.filter(n=>n!==x.D)),s}static getValidMoves(t,e){let s=this._getValidMoves(t);const n=this.getXY(t);return this.contains(e,n.getKey()-1,n.getValue())&&(s=s.filter(a=>a!=x.L)),this.contains(e,n.getKey()+1,n.getValue())&&(s=s.filter(a=>a!=x.R)),this.contains(e,n.getKey(),n.getValue()-1)&&(s=s.filter(a=>a!=x.U)),this.contains(e,n.getKey(),n.getValue()+1)&&(s=s.filter(a=>a!=x.D)),s}static contains(t,e,s){return t.includes(this.getIndex(e,s))}static getStateAsString(t){let e=t.getBoardState(),s=t.getGoals();return this.zenGardenOn?this.getStateAsZenStoneGarden(e,s):this.__getStateAsString(e,s)}static __getStateAsString(t,e){return Array.from({length:16},(s,n)=>{let a;const c=t[n];return c===-1?a=G.blue("*"):e.includes(c)?a=G.red(c.toString()):e.includes(n+1)?a=G.green(c.toString()):a=c.toString(),a+="	",n!==0&&(n+1)%4===0&&(a+=`
`),a}).join("")}static getStateAsZenStoneGarden(t,e){return Array.from({length:16},(s,n)=>{let a;const c=t[n];return e.includes(c)?a="x":e.includes(n+1)?a="o":a="",a+="	",n!==0&&(n+1)%4===0&&(a+=`
`),a}).join("")}static prntState(t){let e=this.getStateAsString(t);G.prnt(e)}static prntStateV0(t){let e=this.getStateAsString(t);G.prntAtSomeElement("shadowTester",e)}static getReverseAction(t){return t===x.D?x.U:t===x.U?x.D:t===x.L?x.R:t===x.R?x.L:null}static getAction(t,e,s){const n=e.getHashCodeV2();if(t.has(n)){let a=t.get(n);if(a===void 0)throw new Error("qTable.has(hash) == true, but get(..) returned row == undefined");return a.getActionWithMaxValue(s)}else return this.getFirstPossibleAction(e,s)}static getRandomAction(t){return t.length===0&&G.prntErrorMsg("Check lessons configuration, for logic errors: The getPossibleActions function returned no action."),t.length>0?t[Math.floor(Math.random()*t.length)]:x.D}static getFirstPossibleAction(t,e){const s=this.getPossibleActions(t);if(s.length===1)return G.prntErrorMsg("Check lessons configuration, for logic errors: The getPossibleActions function returned only one action: "+s[0]),s[0];const n=s.filter(a=>a!==e);return n.length===0?(G.prntErrorMsg("Check lessons configuration, for logic errors: The getPossibleActions function returned no action."),x.D):n[0]}static getPossibleActions(t){const e=t.getBoardState().indexOf(-1),s=t.getFixedElements().map(n=>n-1);return Te.getValidMoves(e,s)}};S(Te,"zenGardenOn",!1);let T=Te;class G{static blue(t){return'<span style="color: blue;">'+t+"</span>"}static green(t){return'<span style="color: green;">'+t+"</span>"}static red(t){return'<span style="color: red;">'+t+"</span>"}static clearScreenX(){const t=document.getElementById("console");t&&(t.innerHTML="")}static prntTestStep(t){this.addElementToConsoleDiv("testGameStep",t)}static prntAtSomeElement(t,e){this.addElementToConsoleDiv(t,e)}static prntStatsInfo(t){const e=document.getElementById("statsInfo");e&&(e.setAttribute("class","console-text"),e.textContent=`
`+t.toLowerCase().replace(", "," | "))}static prntErrorMsg(t){if(T.zenGardenOn)return;const e=document.getElementById("statsInfo");e&&(e.setAttribute("class","console-error-msg"),e.textContent=`
`+t)}static addElementToConsoleDiv(t,e){const s=document.getElementById(t);s?s.innerHTML=e:this.prnt(e,"color:black;",t)}static prnt(t,e="color:black;",s=null){const n=document.getElementById("console");if(n){const a=document.createElement("div");a.innerHTML=t,e&&(a.style.cssText=e),s!==null&&(a.id=s),n.appendChild(a),n.scrollTop=n.scrollHeight}}static warn(t){this.prnt(t,"color: orange;")}}const Fe=class Fe{static prnt(t,e="color: black;"){G.prnt(t,e)}static str(t,e){const s=t.toString();if(s.length>=e)return s;const n=e-s.length;return s+Fe.emptyString.substring(0,n)}static sum(t){return!t||(t=t.filter(e=>e!==0),t.length===0)?0:t.reduce((e,s)=>e+s,0)}static toString(t){return`[${Array.from(t).map(String).join(", ")}]`}static px(){return(t,e)=>t}static equalArrays(t,e){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}static shuffleArray(t){return t.sort(()=>Math.random()-.5)}static _sleep(t){return new Promise(e=>setTimeout(e,t))}static async sleep(t){await this._sleep(t)}};S(Fe,"emptyString","                                           ");let k=Fe;class Ge{constructor(){S(this,"enabled",!0);S(this,"id",0)}enable(){return this.id++,this.enabled=!0,this.id}stop(){this.enabled=!1}isEnabled(){return this.enabled}goodToGo(t){return!(!this.enabled||t!==this.id)}}class ae{static shuffle(t,e,s){const n=e.map(a=>a-1);for(let a=0;a<s;a++)t=ae.makeRandomMove(t,n);return t}static makeRandomMove(t,e){const s=t.indexOf(-1),n=T.getValidMoves(s,e),a=k.shuffleArray(n)[0];return T.makeMove(t,a)}static main(){this.shuffleVx([1,2,3,4,5,6])}static shuffleVx(t){const e=Array.from({length:16},(c,i)=>i+1).filter(c=>!t.includes(c)).map(c=>(k.prnt(c),c));k.prnt("---");const s=[...e].sort(()=>Math.random()-.5).map(c=>(k.prnt(c),c));k.prnt("---");const n=e.map((c,i)=>{const h=ge.from(c,s[i]);return k.prnt(h),h});return k.prnt("---"),Array.from({length:16},(c,i)=>{const h=this.zip(n,i);return k.prnt(h),h}).map(c=>c.getValue()===16?-1:c.getValue()).map(c=>(k.prnt(c),c))}static zip(t,e){const s=t.find(n=>n.getKey()===e+1);return s===void 0?ge.from(e,e+1):ge.from(e,s.getValue())}}class he{static async getFile(t){let e="";try{const s=await fetch(t);if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);e=await s.text()}catch(s){console.error("Error reading file: "+t,s)}finally{return e}}}class Se{static async getLessons(){if(this.lessons!==void 0)return this.lessons;let t=await this.getLessonsJson();try{return this.lessons=JSON.parse(t),this.lessons.sort((e,s)=>e.lesson-s.lesson),this.lessons}catch(e){return console.error("Invalid JSON string:",e),this.lessons=[]}}static async getLessonsJson(){if(this.lessonsJson!==void 0)return this.lessonsJson;const t="dist/lessons_0.json",e="/public/lessons_0.json";return this.lessonsJson=await he.getFile(t),this.lessonsJson===""?await he.getFile(e):this.lessonsJson}static updateLessonsJson(t){try{let e=JSON.parse(t);return e.sort((s,n)=>s.lesson-n.lesson),this.lessonsJson=t,this.lessons=e,{success:!0,messgae:"Lessons updated successfully."}}catch(e){return console.error("Invalid JSON string:",e),{success:!1,messgae:"Invalid JSON string: "+e}}}}S(Se,"lessonsJson"),S(Se,"lessons");const g=class g{constructor(t){S(this,"goals");S(this,"lockedStateElements");S(this,"state");S(this,"episodesToTrain");S(this,"lessonNb");this.lessonNb=t,this.goals=[],this.lockedStateElements=[],this.state=[],this.episodesToTrain=0}getState(){return this.state}getGoals(){return this.goals}getLockedStateElements(){return this.lockedStateElements}getEpisodesToTrain(){return this.episodesToTrain}static async getLessonProducersFromJson(){return(await Se.getLessons()).map((e,s)=>g.from(e,s))}static from(t,e){const s=new g(e);return s.goals=t.goals,s.lockedStateElements=t.lockedElements!==void 0?t.lockedElements:[],s.episodesToTrain=t.lessonsToGenerate!==void 0?t.lessonsToGenerate:100,ae.main(),s.state=ae.shuffle([...g.stateDone],s.lockedStateElements,this.shufleSteps),t.startPositions!==void 0?g.shuffleFreeCellStarPosition(s,t.startPositions.map(n=>n-1)):s}static generateLessons0(){return[g.state1(0),g.shuffleFreeCellStarPosition(g.createStateProducer(2,1),[1,4]),g.shuffleFreeCellStarPosition(g.createStateProducer(3,2),[2,5]),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_3_4(3),[3,6]),g.shuffleFreeCellStarPosition(g.createStateProducer(5,4),[6,7]),g.shuffleFreeCellStarPosition(g.createStateProducer(6,5),[5,8]),g.shuffleFreeCellStarPosition(g.createStateProducer(7,6),[6,9]),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_7_8(7),[8,11]),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_9_13(8),[10,11]),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_10__15(9),[9,13]),g.state12(10)]}static generateLessonsV1(){return[g.createStateProducerForGoals_1_2(0),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_3_4(1),[2,3,4]),g.shuffleFreeCellStarPosition(g.createStateProducer(5,2),[6,7]),g.shuffleFreeCellStarPosition(g.createStateProducer(6,3),[5,8]),g.shuffleFreeCellStarPosition(g.createStateProducer(7,4),[6,9]),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_7_8(5),[8,11]),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_9_13(6),[10,11]),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_10__15(7),[9,13]),g.state12(8)]}static generateLessons(){return[g.createStateProducerForGoals_1_2(0),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_3_4(1),[2,3,4]),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_5_6(2),[6,7]),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_7_8(3),[8,9,6]),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_9_13(4),[10,11]),g.shuffleFreeCellStarPosition(g.createStateProducerForGoals_10__15(5),[9,13]),g.state12(6)]}static createStateProducerForGoals_1_2(t){const e=new g(t);return e.goals=[1,2],e.lockedStateElements=[],e.state=[...g.stateDone],e.episodesToTrain=100,g.shuffle(e,e.lockedStateElements),e}static state1(t){return g.createStateProducer(1,t)}static createStateProducerForGoals_3_4(t){const e=new g(t);return e.goals=[3,4],e.lockedStateElements=[1,2],e.state=[...g.stateDone],e.episodesToTrain=100,g.shuffle(e,[1,2,3]),e}static createStateProducerForGoals_5_6(t){const e=new g(t);return e.goals=[5,6],e.lockedStateElements=[1,2,3,4],e.state=[...g.stateDone],e.episodesToTrain=100,g.shuffle(e,e.lockedStateElements),e}static createStateProducer(t,e){const s=new g(e);return s.goals=[t],s.lockedStateElements=Array.from({length:t-1},(n,a)=>a+1),s.state=[...g.stateDone],s.episodesToTrain=100,g.shuffle(s,s.lockedStateElements),s}static shuffleFreeCellStarPosition(t,e){const s=k.shuffleArray(e)[0],n=t.state.indexOf(-1),a=t.state[s];return t.state[s]=-1,t.state[n]=a,t}static createStateProducerForGoals_7_8(t){const e=new g(t);return e.goals=[7,8],e.lockedStateElements=[1,2,3,4,5,6],e.state=[...g.stateDone],e.episodesToTrain=100,g.shuffle(e,[1,2,3,4,5,6,7]),e}static createStateProducerForGoals_9_13(t){const e=new g(t);return e.goals=[9,13],e.lockedStateElements=[1,2,3,4,5,6,7,8],e.state=[...g.stateDone],e.episodesToTrain=100,g.shuffle(e,e.lockedStateElements),e}static createStateProducerForGoals_10__15(t){const e=new g(t);return e.goals=[10,11,14,15],e.lockedStateElements=[1,2,3,4,5,6,7,8,9,13],e.state=ae.shuffle([...g.stateDone],e.lockedStateElements,this.shufleSteps),e.episodesToTrain=100,e}static state12(t){const e=new g(t);return e.goals=[12],e.lockedStateElements=[1,2,3,4,5,6,7,8,9,10,11,13,14,15],e.state=ae.shuffle([...g.stateDone],e.lockedStateElements,this.shufleSteps),e.episodesToTrain=10,e}isLockedIndex(t){return this.lockedStateElements.includes(t+1)}static shuffle(t,e){let s=t.state.filter(n=>!e.includes(n));s=k.shuffleArray(s),t.state=[...e,...s]}resetStateV0(){const t=g.generateLessons()[this.lessonNb];this.goals=[...t.goals],this.lockedStateElements=[...t.lockedStateElements],this.state=[...t.state]}async resetState(){const e=(await g.getLessonProducersFromJson())[this.lessonNb];this.goals=[...e.goals],this.lockedStateElements=[...e.lockedStateElements],this.state=[...e.state]}};S(g,"stateDone",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,-1]),S(g,"shufleSteps",100);let ee=g;class ze{constructor(t){S(this,"state");S(this,"qValues");this.state=t,this.qValues=new Map}setValue(t,e){const s=T.getPossibleActions(this.state);this.qValues.size===0&&s.forEach(n=>this.qValues.set(n,0)),s.includes(t)&&this.qValues.set(t,e)}getState(){return this.state}getValue(t){return this.qValues.get(t)||0}getActionWithMaxValue(t){const e=t===null?null:this.getAction(t);if(e==null){let s=T.getPossibleActions(this.state);if(s=s.filter(n=>n!==t),s.length===0)throw G.prntErrorMsg("possibleActions.length === 0, there allways must be some action to go around.. need to debug."),new Error("possibleActions.length === 0, there allways must be some action to go around.. need to debug.");return s[0]}else return e}getAction(t){const s=Array.from(this.qValues.entries()).filter(([n])=>n!==t).reduce((n,a)=>a[1]>n[1]?a:n,[t,-1/0]);return s[1]>-1/0?s[0]:void 0}getMaxValue(){return this.qValues.size===0?0:Math.max(...Array.from(this.qValues.values()))}}class ke{static updateQTable(t,e,s,n,a,c,i,h){let A;if(c)A=a;else{const P=this.getQValue(t,e,s),M=this.getMaxQValue(t,n);A=this.calcQValue(a,P,M,h,i)}this.addStateWithZeroValuesToQTableIfStateNotExist(t,e),this.updateQTableEntry(t,e.getHashCodeV2(),s,A)}static updateQTableEntry(t,e,s,n){var a;(a=t.get(e))==null||a.setValue(s,n)}static getMaxQValue(t,e){var n;const s=e.getHashCodeV2();return this.addStateWithZeroValuesToQTableIfStateNotExist(t,e),((n=t.get(s))==null?void 0:n.getMaxValue())??0}static getQValue(t,e,s){var a;const n=e.getHashCodeV2();return this.addStateWithZeroValuesToQTableIfStateNotExist(t,e),((a=t.get(n))==null?void 0:a.getValue(s))??0}static addStateWithZeroValuesToQTableIfStateNotExist(t,e){t.has(e.getHashCodeV2())||this.addStateWithZeroValuesToQTable(t,e)}static addStateWithZeroValuesToQTable(t,e){const s=e.getHashCodeV2(),n=new ze(e);t.set(s,n)}static calcQValue(t,e,s,n,a){return e+a*(t+n*s-e)}}class H{constructor(t,e){S(this,"boardState");S(this,"goals");S(this,"fixedElements");"boardState"in t&&"goals"in t&&"fixedElements"in t?(this.boardState=[...t.boardState],this.goals=[...t.goals],this.fixedElements=[...t.fixedElements]):t instanceof H?(this.boardState=[...t.getBoardState()],this.goals=[...t.getGoals()],this.fixedElements=[...t.getFixedElements()]):(this.boardState=[...t],this.goals=[...(e==null?void 0:e.getGoals())??[]],this.fixedElements=[...(e==null?void 0:e.getLockedStateElements())??[]])}static getTestCase(){let t={boardState:[1,2,3,4,5,6,7,8,9,10,11,-1,14,15,12,13],goals:[12],fixedElements:[1,2,3,4,5,6,7,8,9,10,11,13,14,15]};return new H(t)}getBoardState(){return this.boardState}setBoardState(t){this.boardState=t}getGoals(){return this.goals}setGoals(t){this.goals=t}getFixedElements(){return this.fixedElements}setFixedElements(t){this.fixedElements=t}getHashCodeV2(){const t=this.getHashCodeV3__();return this.hashString(t)}getHashCodeV3__(){return Array.from({length:16},(t,e)=>{let s;const n=this.boardState[e];return n===-1?s="*":this.goals.includes(n)?s=String(n):this.goals.includes(e+1)?s="o":s=" ",s=s+"	",e!==0&&(e+1)%4===0&&(s=s+`
`),s}).join("")}getHashCode(){const t=this.boardState.map(String).join(",");return this.hashString(t)}hashString(t){let e=0;for(let s=0;s<t.length;s++){const n=t.charCodeAt(s);e=(e<<5)-e+n,e|=0}return e}equals(t){return this.getHashCode()===t.getHashCode()}hashCode(){return this.getHashCode()}}class Pe{constructor(t,e,s,n,a){S(this,"state");S(this,"action");S(this,"reward");S(this,"done");S(this,"newState");this.state=new H(t),this.action=e,this.reward=s,this.done=n,this.newState=new H(a)}getState(){return this.state}getAction(){return this.action}getReward(){return this.reward}isDone(){return this.done}getNewState(){return this.newState}equals(t){return t instanceof Pe?this.hashCode()===t.hashCode():!1}hashCode(){return this.state.getHashCodeV2()^this.newState.getHashCodeV2()}}class Je{constructor(t,e,s=0,n=!1){S(this,"state");S(this,"action");S(this,"reward");S(this,"isTerminal");this.state=t,this.action=e,this.reward=s,this.isTerminal=n}}const J=class J{constructor(t){S(this,"state");S(this,"goals");S(this,"reverseAction",null);S(this,"bigCircleAction1",[]);S(this,"bigCircleAction2",[]);S(this,"smallCircleAction1",[]);S(this,"smallCircleAction2",[]);S(this,"circleAction",[]);J.stateProducer=t,J.stateProducer.resetState().then();const e=J.stateProducer.getState();this.goals=J.stateProducer.getGoals(),this.state=new H(e,J.stateProducer)}static isTerminalSuccess(t){return J._isTerminalSuccess(t.getBoardState(),t.getGoals())}reset(){this.reverseAction=null,this.circleAction=[],this.bigCircleAction1=[],this.bigCircleAction2=[],this.smallCircleAction1=[],this.smallCircleAction2=[],this.bigCircleAction1.push(x.L,x.L,x.D,x.D,x.R,x.R,x.U,x.U),this.bigCircleAction2.push(x.R,x.R,x.D,x.D,x.L,x.L,x.U,x.U),this.smallCircleAction1.push(x.L,x.D,x.R,x.U,x.L),this.smallCircleAction2.push(x.R,x.D,x.L,x.U,x.R)}getInitState(){J.stateProducer.resetState();const t=J.stateProducer.getState();return this.goals=J.stateProducer.getGoals(),this.state=new H(t,J.stateProducer),this.state}executeAction(t,e){const s=T.makeMove(t.getBoardState(),e),n=new H(s,J.stateProducer);let a=J._isTerminalSuccess(s,this.goals);this.state=new H(s,J.stateProducer);let c=NaN;this.reverseAction=T.getReverseAction(e),this.circleAction.push(e),this.circleAction.length>8&&this.circleAction.shift(),(k.equalArrays(this.circleAction,this.bigCircleAction1)||k.equalArrays(this.circleAction,this.bigCircleAction2)||k.equalArrays(this.circleAction,this.smallCircleAction1)||k.equalArrays(this.circleAction,this.smallCircleAction2))&&(a=!0);const i=this.state.getBoardState().indexOf(-1);return J.stateProducer.isLockedIndex(i)&&(a=!0,c=-1),isNaN(c)&&(c=this.getReward(s,this.goals)),new Je(n,e,c,a)}static _isTerminalSuccess(t,e){return e.filter(n=>t[n-1]===n).length===e.length}prntInfo(){k.prnt(`

------------------------------------------------------------------
`);const t=this.state.getBoardState(),e=t.indexOf(-1),s=T.getXY(e);k.prnt(s.getKey()+" - "+s.getValue());const n=T.getIndex(s.getKey(),s.getValue());k.prnt(`${e} - ${n}`);const a=T._getValidMoves(e);k.prnt(a);const c=this.getReward(t,this.goals);k.prnt("reward: "+c),k.prnt(`
`),T.prntState(this.state)}getReward(t,e){const s=t.indexOf(-1),n=T.getXY(s),c=e.map(h=>this.getDistance(T.getXY(t.indexOf(h)),T.getXY(h-1))).reduce((h,A)=>h+A,0);if(c===0)return 100.5;const i=e.reduce((h,A)=>h+this.getDistance(T.getXY(t.indexOf(A)),n),0);return 1/(c+i)}getDistance(t,e){const s=Math.pow(e.getKey()-t.getKey(),2),n=Math.pow(e.getValue()-t.getValue(),2);return Math.sqrt(s+n)}};S(J,"stateProducer");let le=J;const ne=class ne{constructor(){S(this,"maxExperienceSize",2e3)}async train(t,e,s,n,a,c){if(!ye.semaphore.goodToGo(c))return;const i=new le(t);i.reset();let h=i.getInitState();const A=.5;let P=!1,M=0;for(;!P&&M<50;){if(!ye.semaphore.goodToGo(c))return;if(M++,le._isTerminalSuccess(h.getBoardState(),h.getGoals()))break;let q;const O=T.getPossibleActions(h);if(i.reverseAction!==null){const u=O.indexOf(i.reverseAction);O.splice(u,1)}Math.random()<A?q=T.getRandomAction(O):q=T.getAction(e,h,i.reverseAction);const F=i.executeAction(h,q),V=F.state,l=F.reward;P=F.isTerminal;const o=new Pe(h,q,l,P,V);ne.experience.add(o),h=F.state}ne.replayExperience(ne.experience,e,n,s,this.maxExperienceSize),ne.experience.size>this.maxExperienceSize&&ne.experience.clear();const L=`QTable size: ${e.size}, experience size: ${ne.experience.size}`;let j=`
`+a+`
`+L;G.prntAtSomeElement("episodeTrainer",j),G.prntStatsInfo(L),await k.sleep(0)}static replayExperience(t,e,s,n,a){Array.from(t).sort(()=>Math.random()-.5).slice(0,a).forEach(i=>{ke.updateQTable(e,i.getState(),i.getAction(),i.getNewState(),i.getReward(),i.isDone(),s,n)})}};S(ne,"experience",new Set);let Ee=ne;class He{constructor(t){S(this,"lessonNo",0);S(this,"lessons");S(this,"lessonCount");S(this,"stateProducer");S(this,"state");S(this,"goals");S(this,"gameOver",!1);S(this,"step",0);S(this,"reverseAction",null);this.lessons=t,this.lessonCount=t.length,this.stateProducer=t[this.lessonNo];let e=ae.shuffle(ee.stateDone,[],1e3);this.state=new H(e,this.stateProducer),this.goals=this.stateProducer.getGoals()}resetIfGameIsOver(){if(!this.gameOver)return;this.lessonNo=0,this.stateProducer=this.lessons[this.lessonNo];let t=ae.shuffle(ee.stateDone,[],1e3);this.state=new H(t,this.stateProducer),this.goals=this.stateProducer.getGoals(),this.gameOver=!1,this.step=0,this.reverseAction=null}}class je{constructor(){S(this,"ctx",null);S(this,"lessons",null);S(this,"pauseBetweenMoves",1)}async init(){const t=await ee.getLessonProducersFromJson();this.ctx=new He(t)}makeMove(){if(console.log("ShadowTester .. "),this.ctx===null)return;this.ctx.resetIfGameIsOver(),this.ctx.step++;const t=re.qTable;let e=this.getAction(t,this.ctx.state,this.ctx.reverseAction);this.ctx.reverseAction=T.getReverseAction(e);const s=T.makeMove(this.ctx.state.getBoardState(),e),n=le._isTerminalSuccess(s,this.ctx.goals);if(this.ctx.state=new H(s,this.ctx.stateProducer),this.ctx.gameOver=k.equalArrays(this.ctx.state.getBoardState(),ee.stateDone),this.ctx.gameOver=this.ctx.step>50,this.prntState(this.ctx.state,this.ctx.step),n&&!this.ctx.gameOver&&this.ctx.lessonNo<this.ctx.lessonCount-1&&(this.ctx.lessonNo++,this.ctx.stateProducer=this.ctx.lessons[this.ctx.lessonNo],this.ctx.goals=this.ctx.stateProducer.getGoals(),this.ctx.state=new H(this.ctx.state.getBoardState(),this.ctx.stateProducer)),n&&this.ctx.gameOver&&this.ctx.lessonNo===this.ctx.lessonCount-1){const a=le.isTerminalSuccess(this.ctx.state)?"success":"failed";this.prntTerminalState(this.ctx.state,this.ctx.step,a)}this.ctx.resetIfGameIsOver()}getAction(t,e,s){const n=e.getHashCodeV2();ke.addStateWithZeroValuesToQTableIfStateNotExist(t,e);const a=t.get(n);return a?a.getActionWithMaxValue(s):(G.prntErrorMsg("no action found"),T.getFirstPossibleAction(e,s))}prntState(t,e){this.prntTerminalState(t,e,null)}prntTerminalState(t,e,s){let n=T.zenGardenOn?"":`${e}
----
`,a=T.getStateAsString(t),c=T.zenGardenOn||s===null?"":`
----
${s}`;G.prntAtSomeElement("shadowTester",n+a+c)}}const ue=class ue{constructor(){S(this,"episodeTrainer",new Ee);S(this,"semaphoreId",null);S(this,"shadowTesterIntervalId",null)}async train(t,e){if(this.semaphoreId=ue.semaphore.enable(),!ue.semaphore.goodToGo(this.semaphoreId))return;await this.runShadowTester(),Ee.experience.clear();const s=.9,n=.1,a=await ee.getLessonProducersFromJson(),c=async(h,A)=>{await this.episodeTrainer.train(h,t,s,n,A,this.semaphoreId)},i=async(h,A,P)=>{let M=h.getEpisodesToTrain();for(let L=0;L<M;L++){let j=A+"Episode: "+(L+1)+" of "+M+`
`+P;await c(h,j)}};for(let h=0;h<e;h++)for(let A=0;A<a.length;A++){let P=a[A],M="Lesson: "+(A+1)+" of "+a.length+`.
`,L="Running training batch: "+(h+1)+" of "+e;await i(P,M,L)}k.prnt("training done")}async runShadowTester(){const t=new je;await t.init(),t.makeMove(),this.shadowTesterIntervalId=setInterval(()=>t.makeMove(),500)}stop(){ue.semaphore.stop(),this.shadowTesterIntervalId!==null&&(clearInterval(this.shadowTesterIntervalId),this.shadowTesterIntervalId=null)}};S(ue,"semaphore",new Ge);let ye=ue;const de=class de{static async train(){this.trainer=new ye,await this.trainer.train(de.qTable,10)}static async test(){this.tester=new fe,await this.tester.test()}static async stopTrainer(){var t;(t=this.trainer)==null||t.stop()}static async stopTester(){var t;(t=this.tester)==null||t.stop()}static async restartIfIsRunning(){fe.semaphore.isEnabled&&(await this.stopTester(),await this.test())}};S(de,"qTable",new Map),S(de,"trainer",null),S(de,"tester",null);let re=de;class Me{static async getQTableActionMap(){const t="dist/qTableActions.csv",e="/public/qTableActions.csv";let s=await he.getFile(t);s=s===""?await he.getFile(e):s;const n=s.trim().split(`
`),a=new Map;return n.forEach(c=>{const[i,h]=c.trim().split(",");a.set(i,x[h])}),a}static getStateActionKey(t){const e=t.getBoardState(),s=t.getGoals();return Array.from({length:16},(a,c)=>{let i;const h=e[c];return h===-1?i="*":s.includes(h)?i=`${h}`:s.includes(c+1)?i="o":i=" ",i+="_",c!==0&&(c+1)%4===0&&(i+="|"),i}).join("").trim()}}const me=class me{static async getConfig(){if(this.config!==void 0)return this.config;let t=await this.getConfigJson();try{return JSON.parse(t)}catch(e){const s="Invalid JSON string: "+e;return console.error(s),this.config={version:"-1",use_pretrained_data_while_testing:!0}}}static async getConfigJson(){if(this.configJson!==void 0)return this.configJson;const t="dist/config.json",e="/public/config.json";return this.configJson=await he.getFile(t),this.configJson===""?await he.getFile(e):this.configJson}static async updateConfigJson(t){try{let e=JSON.parse(t);return this.configJson=t,this.config=e,await me.updateTester(),{success:!0,messgae:"Configuration updated successfully. Please toggle the 'test', 'train' or other button to apply the changes."}}catch(e){return console.error("Invalid JSON string:",e),{success:!1,messgae:"Invalid JSON string: "+e}}}static async updateTester(){const t=this.config.use_pretrained_data_while_testing;fe.usePreloadedActions!==t&&await re.restartIfIsRunning()}};S(me,"configJson"),S(me,"config");let we=me;const N=class N{constructor(){S(this,"semaphoreId",null)}async test(){const t=await we.getConfig();if(N.usePreloadedActions=t.use_pretrained_data_while_testing,N.usePreloadedActions&&N.actionMap===null&&(N.actionMap=await Me.getQTableActionMap()),this.semaphoreId=N.semaphore.enable(),!N.semaphore.goodToGo(this.semaphoreId))return;const e=re.qTable;for(;;){if(!N.semaphore.goodToGo(this.semaphoreId))return;await this.testQTable(e)}}stop(){N.semaphore.stop()}async testQTable(t){if(!N.semaphore.goodToGo(this.semaphoreId))return;let e=0;const s=await ee.getLessonProducersFromJson(),n=s.length;let a=s[e],c=ae.shuffle(ee.stateDone,[],1e3),i=new H(c,a),h=a.getGoals();N.prntState(i,0);let A=!1,P=0,M=null;for(;!A&&P<200;){if(console.log("tester .. "),!N.semaphore.goodToGo(this.semaphoreId))return;P++;let j=this.getAction(t,i,M);M=T.getReverseAction(j);const q=T.makeMove(i.getBoardState(),j),O=le._isTerminalSuccess(q,h);i=new H(q,a),A=k.equalArrays(i.getBoardState(),ee.stateDone),await k.sleep(1e3/2),N.prntState(i,P),O&&!A&&e<n-1&&(e++,a=s[e],h=a.getGoals(),i=new H(i.getBoardState(),a))}const L=le.isTerminalSuccess(i)?"success":"failed";N.prntTerminalState(i,P,L),await k.sleep(3e3)}getAction(t,e,s){var n;if(N.usePreloadedActions&&N.actionMap!==null&&N.actionMap.size>0){let a=Me.getStateActionKey(e);if((n=N.actionMap)!=null&&n.has(a)){let i=N.actionMap.get(a);return i===void 0&&G.prntErrorMsg("no action found"),i===void 0?T.getFirstPossibleAction(e,s):i}let c=T.getFirstPossibleAction(e,s);return G.prntErrorMsg("no action was found for state, first posible action is: "+c),c}else{const a=e.getHashCodeV2();ke.addStateWithZeroValuesToQTableIfStateNotExist(t,e);const c=t.get(a);return c?c.getActionWithMaxValue(s):(G.prntErrorMsg("no action found"),T.getFirstPossibleAction(e,s))}}static prntState(t,e){this.prntTerminalState(t,e,null)}static prntTerminalState(t,e,s){let n=T.zenGardenOn?"":`${e}
----
`,a=T.getStateAsString(t),c=T.zenGardenOn||s===null?"":`
----
${s}`;G.prntAtSomeElement("shadowTester",n+a+c)}};S(N,"semaphore",new Ge),S(N,"usePreloadedActions"),S(N,"actionMap",null);let fe=N;const qe=window;function Qe(m,t,e={}){const s={tab:"	",indentOn:/[({\[]$/,moveToNewLine:/^[)}\]]/,spellcheck:!1,catchTab:!0,preserveIdent:!0,addClosing:!0,history:!0,window:qe,...e},n=s.window,a=n.document,c=[],i=[];let h=-1,A=!1,P=()=>{},M;m.setAttribute("contenteditable","plaintext-only"),m.setAttribute("spellcheck",s.spellcheck?"true":"false"),m.style.outline="none",m.style.overflowWrap="break-word",m.style.overflowY="auto",m.style.whiteSpace="pre-wrap";const L=(r,d)=>{t(r,d)};let j=!1;m.contentEditable!=="plaintext-only"&&(j=!0),j&&m.setAttribute("contenteditable","true");const q=Ae(()=>{const r=o();L(m,r),u(r)},30);let O=!1;const F=r=>!$(r)&&!Q(r)&&r.key!=="Meta"&&r.key!=="Control"&&r.key!=="Alt"&&!r.key.startsWith("Arrow"),V=Ae(r=>{F(r)&&(Y(),O=!1)},300),l=(r,d)=>{c.push([r,d]),m.addEventListener(r,d)};l("keydown",r=>{r.defaultPrevented||(M=K(),s.preserveIdent?E(r):w(r),s.catchTab&&z(r),s.addClosing&&D(r),s.history&&(X(r),F(r)&&!O&&(Y(),O=!0)),j&&!ie(r)&&u(o()))}),l("keyup",r=>{r.defaultPrevented||r.isComposing||(M!==K()&&q(),V(r),P(K()))}),l("focus",r=>{A=!0}),l("blur",r=>{A=!1}),l("paste",r=>{Y(),be(r),Y(),P(K())}),l("cut",r=>{Y(),Ce(r),Y(),P(K())});function o(){const r=Z(),d={start:0,end:0,dir:void 0};let{anchorNode:y,anchorOffset:b,focusNode:C,focusOffset:I}=r;if(!y||!C)throw"error1";if(y===m&&C===m)return d.start=b>0&&m.textContent?m.textContent.length:0,d.end=I>0&&m.textContent?m.textContent.length:0,d.dir=I>=b?"->":"<-",d;if(y.nodeType===Node.ELEMENT_NODE){const B=a.createTextNode("");y.insertBefore(B,y.childNodes[b]),y=B,b=0}if(C.nodeType===Node.ELEMENT_NODE){const B=a.createTextNode("");C.insertBefore(B,C.childNodes[I]),C=B,I=0}return xe(m,B=>{if(B===y&&B===C)return d.start+=b,d.end+=I,d.dir=b<=I?"->":"<-","stop";if(B===y)if(d.start+=b,!d.dir)d.dir="->";else return"stop";else if(B===C)if(d.end+=I,!d.dir)d.dir="<-";else return"stop";B.nodeType===Node.TEXT_NODE&&(d.dir!="->"&&(d.start+=B.nodeValue.length),d.dir!="<-"&&(d.end+=B.nodeValue.length))}),m.normalize(),d}function u(r){var Oe,Ie;const d=Z();let y,b=0,C,I=0;if(r.dir||(r.dir="->"),r.start<0&&(r.start=0),r.end<0&&(r.end=0),r.dir=="<-"){const{start:_,end:te}=r;r.start=te,r.end=_}let B=0;xe(m,_=>{if(_.nodeType!==Node.TEXT_NODE)return;const te=(_.nodeValue||"").length;if(B+te>r.start&&(y||(y=_,b=r.start-B),B+te>r.end))return C=_,I=r.end-B,"stop";B+=te}),y||(y=m,b=m.childNodes.length),C||(C=m,I=m.childNodes.length),r.dir=="<-"&&([y,b,C,I]=[C,I,y,b]);{const _=f(y);if(_){const pe=a.createTextNode("");(Oe=_.parentNode)==null||Oe.insertBefore(pe,_),y=pe,b=0}const te=f(C);if(te){const pe=a.createTextNode("");(Ie=te.parentNode)==null||Ie.insertBefore(pe,te),C=pe,I=0}}d.setBaseAndExtent(y,b,C,I),m.normalize()}function f(r){for(;r&&r!==m;){if(r.nodeType===Node.ELEMENT_NODE){const d=r;if(d.getAttribute("contenteditable")=="false")return d}r=r.parentNode}}function p(){const d=Z().getRangeAt(0),y=a.createRange();return y.selectNodeContents(m),y.setEnd(d.startContainer,d.startOffset),y.toString()}function v(){const d=Z().getRangeAt(0),y=a.createRange();return y.selectNodeContents(m),y.setStart(d.endContainer,d.endOffset),y.toString()}function E(r){if(r.key==="Enter"){const d=p(),y=v();let[b]=W(d),C=b;if(s.indentOn.test(d)&&(C+=s.tab),C.length>0?(U(r),r.stopPropagation(),R(`
`+C)):w(r),C!==b&&s.moveToNewLine.test(y)){const I=o();R(`
`+b),u(I)}}}function w(r){if(j&&r.key==="Enter")if(U(r),r.stopPropagation(),v()==""){R(`
 `);const d=o();d.start=--d.end,u(d)}else R(`
`)}function D(r){const d=`([{'"`,y=`)]}'"`;if(d.includes(r.key)){U(r);const b=o(),C=b.start==b.end?"":Z().toString(),I=r.key+C+y[d.indexOf(r.key)];R(I),b.start++,b.end++,u(b)}}function z(r){if(r.key==="Tab")if(U(r),r.shiftKey){const d=p();let[y,b]=W(d);if(y.length>0){const C=o(),I=Math.min(s.tab.length,y.length);u({start:b,end:b+I}),a.execCommand("delete"),C.start-=I,C.end-=I,u(C)}}else R(s.tab)}function X(r){if($(r)){U(r),h--;const d=i[h];d&&(m.innerHTML=d.html,u(d.pos)),h<0&&(h=0)}if(Q(r)){U(r),h++;const d=i[h];d&&(m.innerHTML=d.html,u(d.pos)),h>=i.length&&h--}}function Y(){if(!A)return;const r=m.innerHTML,d=o(),y=i[h];if(y&&y.html===r&&y.pos.start===d.start&&y.pos.end===d.end)return;h++,i[h]={html:r,pos:d},i.splice(h+1);const b=300;h>b&&(h=b,i.splice(0,1))}function be(r){if(r.defaultPrevented)return;U(r);const y=(r.originalEvent??r).clipboardData.getData("text/plain").replace(/\r\n?/g,`
`),b=o();R(y),L(m),u({start:Math.min(b.start,b.end)+y.length,end:Math.min(b.start,b.end)+y.length,dir:"<-"})}function Ce(r){const d=o(),y=Z();(r.originalEvent??r).clipboardData.setData("text/plain",y.toString()),a.execCommand("delete"),L(m),u({start:Math.min(d.start,d.end),end:Math.min(d.start,d.end),dir:"<-"}),U(r)}function xe(r,d){const y=[];r.firstChild&&y.push(r.firstChild);let b=y.pop();for(;b&&d(b)!=="stop";)b.nextSibling&&y.push(b.nextSibling),b.firstChild&&y.push(b.firstChild),b=y.pop()}function ce(r){return r.metaKey||r.ctrlKey}function $(r){return ce(r)&&!r.shiftKey&&oe(r)==="Z"}function Q(r){return ce(r)&&r.shiftKey&&oe(r)==="Z"}function ie(r){return ce(r)&&oe(r)==="C"}function oe(r){let d=r.key||r.keyCode||r.which;if(d)return(typeof d=="string"?d:String.fromCharCode(d)).toUpperCase()}function R(r){r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),a.execCommand("insertHTML",!1,r)}function Ae(r,d){let y=0;return(...b)=>{clearTimeout(y),y=n.setTimeout(()=>r(...b),d)}}function W(r){let d=r.length-1;for(;d>=0&&r[d]!==`
`;)d--;d++;let y=d;for(;y<r.length&&/[ \t]/.test(r[y]);)y++;return[r.substring(d,y)||"",d,y]}function K(){return m.textContent||""}function U(r){r.preventDefault()}function Z(){var r;return((r=m.parentNode)==null?void 0:r.nodeType)==Node.DOCUMENT_FRAGMENT_NODE?m.parentNode.getSelection():n.getSelection()}return{updateOptions(r){Object.assign(s,r)},updateCode(r){m.textContent=r,L(m),P(r)},onUpdate(r){P=r},toString:K,save:o,restore:u,recordHistory:Y,destroy(){for(let[r,d]of c)m.removeEventListener(r,d)}}}var Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$e={exports:{}};(function(m){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(s){var n=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,c={},i={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function l(o){return o instanceof h?new h(o.type,l(o.content),o.alias):Array.isArray(o)?o.map(l):o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(l){return Object.prototype.toString.call(l).slice(8,-1)},objId:function(l){return l.__id||Object.defineProperty(l,"__id",{value:++a}),l.__id},clone:function l(o,u){u=u||{};var f,p;switch(i.util.type(o)){case"Object":if(p=i.util.objId(o),u[p])return u[p];f={},u[p]=f;for(var v in o)o.hasOwnProperty(v)&&(f[v]=l(o[v],u));return f;case"Array":return p=i.util.objId(o),u[p]?u[p]:(f=[],u[p]=f,o.forEach(function(E,w){f[w]=l(E,u)}),f);default:return o}},getLanguage:function(l){for(;l;){var o=n.exec(l.className);if(o)return o[1].toLowerCase();l=l.parentElement}return"none"},setLanguage:function(l,o){l.className=l.className.replace(RegExp(n,"gi"),""),l.classList.add("language-"+o)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(f){var l=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(f.stack)||[])[1];if(l){var o=document.getElementsByTagName("script");for(var u in o)if(o[u].src==l)return o[u]}return null}},isActive:function(l,o,u){for(var f="no-"+o;l;){var p=l.classList;if(p.contains(o))return!0;if(p.contains(f))return!1;l=l.parentElement}return!!u}},languages:{plain:c,plaintext:c,text:c,txt:c,extend:function(l,o){var u=i.util.clone(i.languages[l]);for(var f in o)u[f]=o[f];return u},insertBefore:function(l,o,u,f){f=f||i.languages;var p=f[l],v={};for(var E in p)if(p.hasOwnProperty(E)){if(E==o)for(var w in u)u.hasOwnProperty(w)&&(v[w]=u[w]);u.hasOwnProperty(E)||(v[E]=p[E])}var D=f[l];return f[l]=v,i.languages.DFS(i.languages,function(z,X){X===D&&z!=l&&(this[z]=v)}),v},DFS:function l(o,u,f,p){p=p||{};var v=i.util.objId;for(var E in o)if(o.hasOwnProperty(E)){u.call(o,E,o[E],f||E);var w=o[E],D=i.util.type(w);D==="Object"&&!p[v(w)]?(p[v(w)]=!0,l(w,u,null,p)):D==="Array"&&!p[v(w)]&&(p[v(w)]=!0,l(w,u,E,p))}}},plugins:{},highlightAll:function(l,o){i.highlightAllUnder(document,l,o)},highlightAllUnder:function(l,o,u){var f={callback:u,container:l,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",f),f.elements=Array.prototype.slice.apply(f.container.querySelectorAll(f.selector)),i.hooks.run("before-all-elements-highlight",f);for(var p=0,v;v=f.elements[p++];)i.highlightElement(v,o===!0,f.callback)},highlightElement:function(l,o,u){var f=i.util.getLanguage(l),p=i.languages[f];i.util.setLanguage(l,f);var v=l.parentElement;v&&v.nodeName.toLowerCase()==="pre"&&i.util.setLanguage(v,f);var E=l.textContent,w={element:l,language:f,grammar:p,code:E};function D(X){w.highlightedCode=X,i.hooks.run("before-insert",w),w.element.innerHTML=w.highlightedCode,i.hooks.run("after-highlight",w),i.hooks.run("complete",w),u&&u.call(w.element)}if(i.hooks.run("before-sanity-check",w),v=w.element.parentElement,v&&v.nodeName.toLowerCase()==="pre"&&!v.hasAttribute("tabindex")&&v.setAttribute("tabindex","0"),!w.code){i.hooks.run("complete",w),u&&u.call(w.element);return}if(i.hooks.run("before-highlight",w),!w.grammar){D(i.util.encode(w.code));return}if(o&&s.Worker){var z=new Worker(i.filename);z.onmessage=function(X){D(X.data)},z.postMessage(JSON.stringify({language:w.language,code:w.code,immediateClose:!0}))}else D(i.highlight(w.code,w.grammar,w.language))},highlight:function(l,o,u){var f={code:l,grammar:o,language:u};if(i.hooks.run("before-tokenize",f),!f.grammar)throw new Error('The language "'+f.language+'" has no grammar.');return f.tokens=i.tokenize(f.code,f.grammar),i.hooks.run("after-tokenize",f),h.stringify(i.util.encode(f.tokens),f.language)},tokenize:function(l,o){var u=o.rest;if(u){for(var f in u)o[f]=u[f];delete o.rest}var p=new M;return L(p,p.head,l),P(l,p,o,p.head,0),q(p)},hooks:{all:{},add:function(l,o){var u=i.hooks.all;u[l]=u[l]||[],u[l].push(o)},run:function(l,o){var u=i.hooks.all[l];if(!(!u||!u.length))for(var f=0,p;p=u[f++];)p(o)}},Token:h};s.Prism=i;function h(l,o,u,f){this.type=l,this.content=o,this.alias=u,this.length=(f||"").length|0}h.stringify=function l(o,u){if(typeof o=="string")return o;if(Array.isArray(o)){var f="";return o.forEach(function(D){f+=l(D,u)}),f}var p={type:o.type,content:l(o.content,u),tag:"span",classes:["token",o.type],attributes:{},language:u},v=o.alias;v&&(Array.isArray(v)?Array.prototype.push.apply(p.classes,v):p.classes.push(v)),i.hooks.run("wrap",p);var E="";for(var w in p.attributes)E+=" "+w+'="'+(p.attributes[w]||"").replace(/"/g,"&quot;")+'"';return"<"+p.tag+' class="'+p.classes.join(" ")+'"'+E+">"+p.content+"</"+p.tag+">"};function A(l,o,u,f){l.lastIndex=o;var p=l.exec(u);if(p&&f&&p[1]){var v=p[1].length;p.index+=v,p[0]=p[0].slice(v)}return p}function P(l,o,u,f,p,v){for(var E in u)if(!(!u.hasOwnProperty(E)||!u[E])){var w=u[E];w=Array.isArray(w)?w:[w];for(var D=0;D<w.length;++D){if(v&&v.cause==E+","+D)return;var z=w[D],X=z.inside,Y=!!z.lookbehind,be=!!z.greedy,Ce=z.alias;if(be&&!z.pattern.global){var xe=z.pattern.toString().match(/[imsuy]*$/)[0];z.pattern=RegExp(z.pattern.source,xe+"g")}for(var ce=z.pattern||z,$=f.next,Q=p;$!==o.tail&&!(v&&Q>=v.reach);Q+=$.value.length,$=$.next){var ie=$.value;if(o.length>l.length)return;if(!(ie instanceof h)){var oe=1,R;if(be){if(R=A(ce,Q,l,Y),!R||R.index>=l.length)break;var U=R.index,Ae=R.index+R[0].length,W=Q;for(W+=$.value.length;U>=W;)$=$.next,W+=$.value.length;if(W-=$.value.length,Q=W,$.value instanceof h)continue;for(var K=$;K!==o.tail&&(W<Ae||typeof K.value=="string");K=K.next)oe++,W+=K.value.length;oe--,ie=l.slice(Q,W),R.index-=Q}else if(R=A(ce,0,ie,Y),!R)continue;var U=R.index,Z=R[0],r=ie.slice(0,U),d=ie.slice(U+Z.length),y=Q+ie.length;v&&y>v.reach&&(v.reach=y);var b=$.prev;r&&(b=L(o,b,r),Q+=r.length),j(o,b,oe);var C=new h(E,X?i.tokenize(Z,X):Z,Ce,Z);if($=L(o,b,C),d&&L(o,$,d),oe>1){var I={cause:E+","+D,reach:y};P(l,o,u,$.prev,Q,I),v&&I.reach>v.reach&&(v.reach=I.reach)}}}}}}function M(){var l={value:null,prev:null,next:null},o={value:null,prev:l,next:null};l.next=o,this.head=l,this.tail=o,this.length=0}function L(l,o,u){var f=o.next,p={value:u,prev:o,next:f};return o.next=p,f.prev=p,l.length++,p}function j(l,o,u){for(var f=o.next,p=0;p<u&&f!==l.tail;p++)f=f.next;o.next=f,f.prev=o,l.length-=p}function q(l){for(var o=[],u=l.head.next;u!==l.tail;)o.push(u.value),u=u.next;return o}if(!s.document)return s.addEventListener&&(i.disableWorkerMessageHandler||s.addEventListener("message",function(l){var o=JSON.parse(l.data),u=o.language,f=o.code,p=o.immediateClose;s.postMessage(i.highlight(f,i.languages[u],u)),p&&s.close()},!1)),i;var O=i.util.currentScript();O&&(i.filename=O.src,O.hasAttribute("data-manual")&&(i.manual=!0));function F(){i.manual||i.highlightAll()}if(!i.manual){var V=document.readyState;V==="loading"||V==="interactive"&&O&&O.defer?document.addEventListener("DOMContentLoaded",F):window.requestAnimationFrame?window.requestAnimationFrame(F):window.setTimeout(F,16)}return i}(t);m.exports&&(m.exports=e),typeof Le<"u"&&(Le.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(s){s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(n,a){var c={};c["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[a]},c.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:c}};i["language-"+a]={pattern:/[\s\S]+/,inside:e.languages[a]};var h={};h[n]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return n}),"i"),lookbehind:!0,greedy:!0,inside:i},e.languages.insertBefore("markup","cdata",h)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(s,n){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+s+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[n,"language-"+n],inside:e.languages[n]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(s){var n=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+n.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+n.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+n.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+n.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:n,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var a=s.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var s="Loading…",n=function(O,F){return"✖ Error "+O+" while fetching file: "+F},a="✖ Error: File does not exist or is empty",c={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},i="data-src-status",h="loading",A="loaded",P="failed",M="pre[data-src]:not(["+i+'="'+A+'"]):not(['+i+'="'+h+'"])';function L(O,F,V){var l=new XMLHttpRequest;l.open("GET",O,!0),l.onreadystatechange=function(){l.readyState==4&&(l.status<400&&l.responseText?F(l.responseText):l.status>=400?V(n(l.status,l.statusText)):V(a))},l.send(null)}function j(O){var F=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(O||"");if(F){var V=Number(F[1]),l=F[2],o=F[3];return l?o?[V,Number(o)]:[V,void 0]:[V,V]}}e.hooks.add("before-highlightall",function(O){O.selector+=", "+M}),e.hooks.add("before-sanity-check",function(O){var F=O.element;if(F.matches(M)){O.code="",F.setAttribute(i,h);var V=F.appendChild(document.createElement("CODE"));V.textContent=s;var l=F.getAttribute("data-src"),o=O.language;if(o==="none"){var u=(/\.(\w+)$/.exec(l)||[,"none"])[1];o=c[u]||u}e.util.setLanguage(V,o),e.util.setLanguage(F,o);var f=e.plugins.autoloader;f&&f.loadLanguages(o),L(l,function(p){F.setAttribute(i,A);var v=j(F.getAttribute("data-range"));if(v){var E=p.split(/\r\n?|\n/g),w=v[0],D=v[1]==null?E.length:v[1];w<0&&(w+=E.length),w=Math.max(0,Math.min(w-1,E.length)),D<0&&(D+=E.length),D=Math.max(0,Math.min(D,E.length)),p=E.slice(w,D).join(`
`),F.hasAttribute("data-start")||F.setAttribute("data-start",String(w+1))}V.textContent=p,e.highlightElement(V)},function(p){F.setAttribute(i,P),V.textContent=p})}}),e.plugins.fileHighlight={highlight:function(F){for(var V=(F||document).querySelectorAll(M),l=0,o;o=V[l++];)e.highlightElement(o)}};var q=!1;e.fileHighlight=function(){q||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),q=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})($e);var De=$e.exports;class ve{static close(){var t;(t=document.getElementById("jsonEditor"))==null||t.remove()}static show(t,e){var M;const s=document.getElementById("tools");if(!s)return;(M=document.getElementById("jsonEditor"))==null||M.remove();const n=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div"),i=document.createElement("div"),h=document.createElement("div");s.appendChild(n),n.appendChild(a),n.appendChild(h),n.appendChild(i),n.appendChild(c),n.id="jsonEditor",h.setAttribute("class","console-text"),a.textContent=this.divLine,c.textContent=this.divLine,Qe(i,async L=>this.update(t,L,h,e)).updateCode(t)}static async update(t,e,s,n){if(e.textContent===null)return;let a=e.textContent;if(e.innerHTML=De.highlight(a,De.languages.js,"js"),a===t)return;let c=await n(a);s.textContent=c.messgae}}S(ve,"divLine","--------------------------------------------------------------------------------------------------");class Ne{static async toggleLessonsDisplay(t){if(t){const e=await Se.getLessonsJson();let s=async n=>Se.updateLessonsJson(n);await ve.show(e,s)}else ve.close()}}class Ve{static async toggleConfigurationDisplay(t){if(t){const e=await we.getConfigJson();let s=async n=>await we.updateConfigJson(n);ve.show(e,s)}else ve.close()}}class se{static setupTools(){var t,e,s,n,a,c;(t=document.getElementById("startTrainingBtn"))==null||t.addEventListener("click",()=>se.startTraining().then()),(e=document.getElementById("startTestingBtn"))==null||e.addEventListener("click",()=>se.startTesting().then()),(s=document.getElementById("pretrainedBtn"))==null||s.addEventListener("click",()=>se.usePretrainedOnOff().then()),(n=document.getElementById("zenGardenBtn"))==null||n.addEventListener("click",()=>se.zenGardenOnOff().then()),(a=document.getElementById("lessonsBtn"))==null||a.addEventListener("click",()=>se.lessonsOnOff().then()),(c=document.getElementById("configBtn"))==null||c.addEventListener("click",()=>se.configOnOff().then()),this.startTesting().then()}static async startTraining(){re.stopTester(),G.clearScreenX(),await re.train(),await se.startTesting()}static async startTesting(){re.stopTrainer(),G.clearScreenX(),await re.test()}static async configOnOff(){this.btnOff("lessonsBtn","training lessons",t=>Ne.toggleLessonsDisplay(t)),this.btnOnOff("configBtn","configuration",t=>Ve.toggleConfigurationDisplay(t))}static async lessonsOnOff(){this.btnOff("configBtn","configuration",t=>Ve.toggleConfigurationDisplay(t)),this.btnOnOff("lessonsBtn","training lessons",t=>Ne.toggleLessonsDisplay(t))}static async usePretrainedOnOff(){this.btnOnOff("pretrainedBtn","use pretrained",t=>fe.usePreloadedActions=t)}static async zenGardenOnOff(){this.btnOnOff("zenGardenBtn","zen garden",t=>T.zenGardenOn=t)}static async btnOff(t,e,s){let n=document.getElementById(t);n==null||n.setAttribute("value",e+" off"),s(!1)}static async btnOnOff(t,e,s){let n=document.getElementById(t);(n==null?void 0:n.getAttribute("value"))!==e+" off"?(n==null||n.setAttribute("value",e+" off"),s(!1)):(n==null||n.setAttribute("value",e+" on"),s(!0))}}se.setupTools();
